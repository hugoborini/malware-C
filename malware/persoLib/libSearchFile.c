#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <dirent.h>
#include <sys/stat.h>


char* supprimer_sous_chaine(char *chaine, char *sous_chaine) {
    int longueur_chaine = strlen(chaine);
    int longueur_sous_chaine = strlen(sous_chaine);
    const char *position = strstr(chaine, sous_chaine);

    if (position != NULL) {
        char *nouvelle_chaine = malloc(longueur_chaine - longueur_sous_chaine + 1);
        if (nouvelle_chaine == NULL) {
            // Gestion de l'échec d'allocation mémoire
            printf("Erreur: Échec de l'allocation mémoire.\n");
            exit(EXIT_FAILURE);
        }

        // Copie la partie de la chaîne avant la sous-chaîne
        strncpy(nouvelle_chaine, chaine, position - chaine);
        nouvelle_chaine[position - chaine] = '\0'; // Ajoute le terminateur nul

        // Copie la partie de la chaîne après la sous-chaîne
        strcat(nouvelle_chaine, position + longueur_sous_chaine);

        return nouvelle_chaine;
    } else {
        // Si la sous-chaîne n'est pas trouvée, retourne la chaîne originale
        char *copie_chaine = malloc(longueur_chaine + 1);
        if (copie_chaine == NULL) {
            printf("Erreur: Échec de l'allocation mémoire.\n");
            exit(EXIT_FAILURE);
        }
        strcpy(copie_chaine, chaine);
        return copie_chaine;
    }
}


char *appendFolder(char *prefix, char *src){
    int buffer = strlen(prefix) + strlen(src) + 1;
    char *final=malloc(sizeof(char) * buffer + 1);
    strcpy(final, prefix);
    strcat(final, "/");
    strcat(final, src);

    

    return final;
}

char *getPath(char *file){
    char *absPath;
    absPath=malloc(sizeof(char) * 1024);

    if (realpath(file, absPath) != NULL) {
        return (absPath);
    } else {
        return "error\n";
    }
    return "error\n";
}


int isFolder(char *path){
    DIR* directory = opendir(path);
    if (directory == NULL) {
        return 0;
    } else{
        return 1;
    }

    
}

int fileExists(const char *filename) {
    struct stat buffer;
    return stat(filename, &buffer) == 0;
}