#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <dirent.h>
#include <sys/stat.h>


char* supStr(char *str, char *subStr) {
    int lenStr = strlen(str);
    int lenSubStr = strlen(subStr);
    const char *position = strstr(str, subStr);

    if (position != NULL) {
        char *newStr = malloc(lenStr - lenSubStr + 1);
        if (newStr == NULL) {
            printf("Erreur: Échec de l'allocation mémoire.\n");
            exit(EXIT_FAILURE);
        }


        strncpy(newStr, str, position - str);
        newStr[position - str] = '\0';

        strcat(newStr, position + lenSubStr);

        return newStr;
    } else {
        char *copyStr = malloc(lenStr + 1);
        if (copyStr == NULL) {
            printf("Erreur: Échec de l'allocation mémoire.\n");
            exit(EXIT_FAILURE);
        }
        strcpy(copyStr, str);
        return copyStr;
    }
}


char *appendFolder(char *prefix, char *src){
    int buffer = strlen(prefix) + strlen(src) + 1;
    char *final=malloc(sizeof(char) * buffer + 1);
    strcpy(final, prefix);
    strcat(final, "/");
    strcat(final, src);

    

    return final;
}

char *getPath(char *file){
    char *absPath;
    absPath=malloc(sizeof(char) * 1024);

    if (realpath(file, absPath) != NULL) {
        return (absPath);
    } else {
        return "error\n";
    }
    return "error\n";
}


int isFolder(char *path){
    DIR* directory = opendir(path);
    if (directory == NULL) {
        return 0;
    } else{
        return 1;
    }

    
}

int fileExists(const char *filename) {
    struct stat buffer;
    return stat(filename, &buffer) == 0;
}